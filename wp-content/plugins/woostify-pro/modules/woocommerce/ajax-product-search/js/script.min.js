"use strict";var woostifySearchDelay=function(a){var t=0<arguments.length&&void 0!==a?a:0;return function(a,e){clearTimeout(t),t=setTimeout(a,e)}}();function woostifyAjaxProductSearch(){var a=document.querySelectorAll(".search-field"),h={link:"aps-link",image:"aps-thumbnail",itemTag:'<div class="aps-item">',contentTag:'<div class="asp-content">',priceTag:'<div class="aps-price">',titleTag:'<h4 class="aps-title">',skuTag:'<div class="aps-sku">',closeTag:"</div>",titleClose:"</h4>",categoryClass:'<div class="category-content">',headerTag:'<div class="search-heading">'},g={dataHtml:function(a,e){var t,s,o,r="",c=this,l=jQuery(e).find(".search-dialog-count"),i=a.products,n=a.categories,d=a.tags,u=a.attributes;if(jQuery(".link-search-page").html(a.product_found+" "+woostify_ajax_product_search_data.products),n&&0<n.length){for(r+=c.categoryClass+c.headerTag+woostify_ajax_product_search_data.categories+c.closeTag,t=0,s=n.length;t<s;t++)h=n[t],r+=c.itemTag+'<a class="'+c.link+'" href="'+h.url+'"></a>'+c.contentTag+c.titleTag+h.name_hightline+c.titleClose+c.closeTag+c.closeTag;r+=c.closeTag}if(d&&0<d.length){for(r+=c.categoryClass+c.headerTag+woostify_ajax_product_search_data.tags+c.closeTag,t=0,s=d.length;t<s;t++){var h=d[t];r+=c.itemTag+'<a class="'+c.link+'" href="'+h.url+'"></a>'+c.contentTag+c.titleTag+h.name_hightline+c.titleClose+c.closeTag+c.closeTag}r+=c.closeTag}if(u&&0<u.length){for(r+=c.categoryClass+c.headerTag+woostify_ajax_product_search_data.attributes+c.closeTag,t=0,s=u.length;t<s;t++){h=u[t];r+=c.itemTag+'<a class="'+c.link+'" href="'+h.url+'"></a>'+c.contentTag+c.titleTag+h.name_hightline+c.titleClose+c.closeTag+c.closeTag}r+=c.closeTag}if(0<a.products.length){for(0<l.length?l.html(a.product_found+" "+woostify_ajax_product_search_data.products):(o='<span class="search-dialog-count aps-highlight">'+a.product_found+" "+woostify_ajax_product_search_data.products+"</span>",jQuery(".dialog-search-title").append(o)),r+=c.categoryClass+c.headerTag+woostify_ajax_product_search_data.products+c.closeTag,t=0,s=i.length;t<s;t++){var g="";(h=i[t]).sku_hightline&&(g="SKU: "),r+=c.itemTag+'<a class="'+c.link+'" href="'+h.url+'"></a><img class="'+c.image+'" src="'+h.image+'" alt="'+h.name+'">'+c.contentTag+c.titleTag+h.name_hightline+c.titleClose+c.priceTag+h.html_price+c.closeTag+c.skuTag+g+h.sku_hightline+c.closeTag+c.closeTag+c.closeTag}r+=c.closeTag,e.querySelector(".ajax-search-results").innerHTML=r}e.querySelector(".ajax-search-results").innerHTML=r,0!=a.products.length||d&&0!=d.length||n&&0!=n.length||(e.querySelector(".ajax-search-results").innerHTML='<div class="aps-no-posts-found">'+woostify_ajax_product_search_data.no_product+"</div>",l.html(""))}};a.length&&"undefined"!=typeof woostify_ajax_product_search_data&&a.forEach(function(a){var r,c,l,i,n,e,d=a.closest("form"),a=!!d&&d.classList.contains("woocommerce-product-search"),u=!!d&&d.querySelector(".search-field");d&&a&&u&&(u.setAttribute("autocomplete","off"),r=d.closest(".site-search")||d.closest(".dialog-search-content"),c=!!r&&r.querySelector(".ajax-search-results"))&&((l=document.createElement("span")).setAttribute("class","clear-search-results ti-close"),u.parentNode.insertBefore(l,u.nextSibling),woostify_ajax_product_search_data.lang&&((a=document.createElement("input")).setAttribute("type","hidden"),a.setAttribute("name","lang"),a.setAttribute("value",woostify_ajax_product_search_data.lang),u.parentNode.insertBefore(a,u.nextSibling)),woostify_ajax_product_search_data.select&&(d.insertAdjacentHTML("afterbegin",woostify_ajax_product_search_data.select),d.classList.add("category-filter")),i=d.querySelector(".ajax-product-search-category-filter"),n=d.querySelector("input[name=lang]"),e=function(){var t,a=void 0!==arguments[0]&&arguments[0],e=i?i.value.trim():"",s=n?n.value.trim():"",o=u.value.trim();o?(l.classList.add("show"),c.classList.remove("hide"),l.onclick=function(){u.value="",l.classList.remove("show"),c.classList.add("hide"),jQuery(r).find(".total-result-wrapper").html(""),jQuery(r).find(".search-dialog-count").html("")},o===u.getAttribute("data-value")&&!a||(u.setAttribute("data-value",o),d.classList.add("loading"),t=jQuery(d).attr("action")+"?post_type=product&s="+o,e&&(t+="&cat_id="+e),s&&(t+="&lang="+s),a={token:woostify_ajax_product_search_data.ajax_nonce,keyword:o,cat_id:e,lang:s},o=woostify_ajax_product_search_data.url,woostify_ajax_product_search_data.code_snippets&&(o=woostify_ajax_product_search_data.ajax_url,a.action="ajax_product_search",a.ajax_nonce=woostify_ajax_product_search_data.ajax_nonce),jQuery.ajax({type:"GET",url:o,data:a,beforeSend:function(a){jQuery(d).addClass("loading")},success:function(e){jQuery(d).removeClass("loading"),jQuery(r).find(".total-result-wrapper").html(""),0<e.data.products.length&&jQuery(r).find(".total-result-wrapper").html('<a href="'+t+'" class="link-search-page aps-highlight">'+e.data.size+woostify_ajax_product_search_data.products+"</a>"),g.dataHtml.call(h,e.data,r),jQuery(document).on("keyup keypress",function(a){if(13===(a.keyCode||a.which)){if(a.preventDefault(),0==e.data.products.length)return!1;window.location.href=t}})}}))):(l.classList.remove("show"),c.classList.add("hide"),jQuery(r).find(".total-result-wrapper").html(""),jQuery(r).find(".search-dialog-count").html(""))},u.addEventListener("input",function(){woostifySearchDelay(function(){e()},500)}),i)&&i.addEventListener("change",function(){e(!0),u.focus()})})}document.addEventListener("DOMContentLoaded",function(){woostifyAjaxProductSearch()});